{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/person.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","search","onChange","handlerSearch","PersonForm","onSubmit","addPerson","newName","handlerNameChange","newNumber","handlerNumberChange","type","Persons","records","map","person","i","key","name","number","onClick","deletePersonOf","id","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearch","notificationMessage","setNotificationMessage","useEffect","personService","filter","RegExp","e","target","preventDefault","idx","findIndex","window","confirm","per","setTimeout","concat","_","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e3ff0942.chunk.js","sourcesContent":["/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React from 'react';\n\nconst Filter = (props) => {\n    return (\n        <div>\n            search name: <input value={props.search} onChange={props.handlerSearch}/>\n        </div>\n    );\n};\n\nexport default Filter;","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React from 'react';\n\nconst PersonForm = (props) => {\n    return (\n        <div>\n            <h2>Add new</h2>\n\n            <form onSubmit={props.addPerson}>\n                <div>\n                    name: <input value={props.newName} onChange={props.handlerNameChange}/>\n                </div>\n                <div>\n                    number: <input value={props.newNumber} onChange={props.handlerNumberChange}/>\n                </div>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default PersonForm;","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React from 'react';\n\nconst Persons = (props) => {\n    return (\n        <div>\n            <h2>Numbers</h2>\n            {props.records.map((person, i) => <div key={i}>{person.name} {person.number} <button onClick={()=>{props.deletePersonOf(person.id)}}>delete</button></div>)}\n        </div>\n    );\n};\n\nexport default Persons;","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data);\n};\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data)\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then(response => response.data)\n};\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then(response => response.data)\n};\n\nexport default {\n    getAll,\n    create,\n    update,\n    remove\n}","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React from 'react';\n\nconst Notification = ({message}) => {\n    if (message.message === null) {\n        return null\n    }\n\n    return (\n        <div className={message.type==='error'?'error':'success'}>\n            {message.message}\n        </div>\n    )\n};\n\nexport default Notification;","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React, {useState, useEffect} from 'react';\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/person\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [search, setSearch] = useState('');\n    const [notificationMessage, setNotificationMessage] = useState({message: null, type: null});\n\n    // load person from server\n    useEffect(() => {\n        personService.getAll().then(\n            data=> {\n                setPersons(data)\n            }\n        );\n    }, []);\n\n\n    const handlerNameChange = (e) => {\n        setNewName(e.target.value);\n    };\n\n    const handlerNumberChange = (e) => {\n        setNewNumber(e.target.value);\n    };\n\n    const handlerSearch = (e) => {\n        setSearch(e.target.value);\n    };\n\n    const addPerson = (e) => {\n        e.preventDefault();\n        const idx=persons.findIndex(person => person.name === newName);\n        if (idx>-1) {\n            if (window.confirm(`${newName} is already added to the phonebook, replace the old number with the new one?`)) {\n                personService.update(persons[idx].id, {name: newName, number: newNumber})\n                    .then(data=>{\n                        setPersons(persons.map(per=>per.id!==data.id?per:data));\n                    })\n            }\n\n        } else {\n            personService.create({name: newName, number: newNumber})\n                .then(person=>{\n                    setNotificationMessage({\n                            message: 'person added successfully',\n                            type: 'success'\n                        }\n                    );\n\n                    setTimeout(() => {\n                        setNotificationMessage({message: null})\n                    }, 5000);\n\n                    setPersons(persons.concat(person));\n                    setNewName('');\n                    setNewNumber('');\n                });\n        }\n\n\n    };\n\n    const deletePersonOf = (id)=>{\n        if (window.confirm(\"Do you really want to delete this?\")) {\n            personService.remove(id)\n                .then(_=>{\n                    setPersons(persons.filter(per=>per.id!==id));\n                })\n                .catch(error=>{\n                    setPersons(persons.filter(per=>per.id!==id));\n                    setNotificationMessage({\n                            message: `person already removed from the server`,\n                            type: 'error'\n                        }\n                    );\n\n                    setTimeout(() => {\n                        setNotificationMessage({message: null})\n                    }, 5000);\n\n\n                })\n        }\n\n    };\n\n    // search\n    const records = search === ''\n        ? persons\n        : persons.filter(person => person.name.search(new RegExp(search, \"i\")) > -1);\n\n    return (\n        <div>\n            <h1>Phonebook</h1>\n\n            <Notification message={notificationMessage} />\n\n            <Filter search={search} handlerSearch={handlerSearch}/>\n\n            <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber}\n                        handlerNameChange={handlerNameChange} handlerNumberChange={handlerNumberChange}/>\n\n            <Persons records={records} deletePersonOf={deletePersonOf}/>\n        </div>\n    )\n};\n\nexport default App","/**\n * @author Harry Tang <harry@powerkernel.com>\n * @link https://powerkernel.com\n * @copyright Copyright (c) 2019 Power Kernel\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);"],"sourceRoot":""}